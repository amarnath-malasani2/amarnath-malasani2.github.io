<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Taaza - New Milk Subscription</title>
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&amp;display=swap"
        rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#FFD700",
                        "background-light": "#FFFFFF",
                        "background-dark": "#0C2D57",
                        "zepto-blue": "#0C2D57",
                        "zepto-yellow": "#FFD700",
                        "zepto-light-bg": "#F8F4E9",
                        "zepto-manage-blue": "#4A7B9D",
                        "zepto-order-red": "#D5715C",
                        "zepto-green": "#10B981",
                        "zepto-gray": "#6B7280",
                    },
                    fontFamily: {
                        "display": ["Space Grotesk", "sans-serif"]
                    },
                    borderRadius: {
                        "DEFAULT": "0.5rem",
                        "lg": "0.75rem",
                        "xl": "1rem",
                        "full": "9999px"
                    },
                },
            },
        }
    </script>
    <style>
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
        }

        /* Custom animations */
        .slide-up {
            animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp {
            from {
                transform: translateY(10px);
                opacity: 0;
            }

            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        /* Accessibility improvements */
        .focus-visible:focus {
            outline: 2px solid #FFD700;
            outline-offset: 2px;
        }

        /* Loading spinner */
        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .spinner {
            animation: spin 1s linear infinite;
        }

        /* Fade in animation */
        .fade-in {
            animation: fadeIn 0.3s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        /* Custom radio button styling */
        .custom-radio:checked+.radio-content {
            border-color: var(--zepto-blue);
            background-color: rgba(12, 45, 87, 0.1);
            box-shadow: 0 0 0 2px rgba(12, 45, 87, 0.2);
        }

        .radio-content {
            transition: all 0.2s ease-in-out;
            border: 2px solid #e5e7eb;
        }

        .radio-content:hover {
            border-color: var(--zepto-blue);
            transform: translateY(-1px);
        }

        /* Day selection styling */
        .day-selector {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .day-option {
            flex: 1;
            min-width: calc(33.333% - 0.5rem);
        }

        .day-checkbox:checked+.day-content {
            background-color: var(--zepto-blue);
            color: white;
            border-color: var(--zepto-blue);
        }

        .day-content {
            padding: 0.75rem;
            border: 2px solid #e5e7eb;
            border-radius: 0.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            background-color: white;
        }

        .day-content:hover {
            border-color: var(--zepto-blue);
        }

        /* Info message styling */
        .info-message {
            background-color: rgba(255, 215, 0, 0.1);
            border-left: 4px solid var(--zepto-yellow);
            padding: 0.75rem;
            margin-top: 0.5rem;
            border-radius: 0 0.5rem 0.5rem 0;
        }

        /* Checkbox styling */
        .time-slot-checkbox:checked+.time-slot-content {
            border-color: var(--zepto-blue);
            background-color: rgba(12, 45, 87, 0.1);
        }

        .time-slot-checkbox:checked+.time-slot-content .checkmark {
            display: block;
        }

        /* Tooltip styling */
        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 120px;
            background-color: #0C2D57;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -60px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 12px;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        /* Sticky summary */
        .sticky-summary {
            position: sticky;
            top: 80px;
            z-index: 10;
        }

        /* Progress bar */
        .progress-bar {
            height: 4px;
            background-color: #e5e7eb;
            border-radius: 2px;
            overflow: hidden;
            margin-top: 8px;
        }

        .progress {
            height: 100%;
            background-color: #10B981;
            width: 0%;
            transition: width 0.3s ease;
        }

        /* Milk type icons */
        .milk-icon {
            font-size: 1.5rem;
            color: #0C2D57;
        }

        .dark .milk-icon {
            color: #FFD700;
        }

        /* Improved milk type selection */
        .milk-type-option {
            transition: all 0.3s ease;
            border-radius: 12px;
            overflow: hidden;
        }

        .milk-type-option:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .milk-type-option.selected {
            border-color: #0C2D57;
            box-shadow: 0 0 0 3px rgba(12, 45, 87, 0.2);
        }

        .milk-type-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .milk-type-name {
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 5px;
        }

        .milk-type-price {
            font-size: 0.9rem;
            color: #6B7280;
        }

        .milk-type-benefits {
            margin-top: 10px;
            font-size: 0.8rem;
            color: #6B7280;
            line-height: 1.4;
        }

        .milk-type-benefits li {
            margin-bottom: 3px;
        }

        .popular-badge {
            position: absolute;
            top: -8px;
            right: 10px;
            background: #FFD700;
            color: #0C2D57;
            font-size: 0.7rem;
            font-weight: bold;
            padding: 3px 8px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
</head>

<body class="font-display bg-zepto-light-bg dark:bg-zinc-900 text-background-dark dark:text-background-light">
    <div class="flex flex-col min-h-screen">
        <!-- Header -->
        <header class="bg-background-dark text-white p-4 sticky top-0 z-20 shadow-md">
            <div class="container mx-auto flex items-center justify-between">
                <button class="text-white focus-visible:focus rounded-lg p-2 hover:bg-blue-900 transition-colors"
                    onclick="goBack()" aria-label="Go back">
                    <span class="material-symbols-outlined">arrow_back</span>
                </button>
                <h1 class="text-lg font-bold">New Milk Subscription</h1>
                <div class="w-8"></div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="flex-grow p-4 space-y-6 slide-up">
            <!-- IMPROVED: Milk Type Selection -->
            <div class="bg-white dark:bg-zinc-800 rounded-xl p-4 shadow-sm border border-gray-100 dark:border-zinc-700">
                <h2 class="text-lg font-bold text-gray-800 dark:text-gray-200 mb-4">Select Milk Type</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Buffalo Milk Option -->
                    <label class="cursor-pointer milk-type-option relative">
                        <input class="sr-only custom-radio" name="milk_type" type="radio" value="buffalo" checked />
                        <div
                            class="radio-content p-4 rounded-lg border-2 border-gray-300 bg-white dark:bg-zinc-700 transition-all h-full">
                            <div class="flex items-center mb-2">
                                <span class="milk-type-icon">üêÉ</span>
                            </div>
                            <div class="milk-type-name text-gray-800 dark:text-gray-200">Buffalo Milk</div>
                            <div class="milk-type-price">‚Çπ50/L</div>
                        </div>
                    </label>

                    <!-- Cow Milk Option -->
                    <label class="cursor-pointer milk-type-option">
                        <input class="sr-only custom-radio" name="milk_type" type="radio" value="cow" />
                        <div
                            class="radio-content p-4 rounded-lg border-2 border-gray-300 bg-white dark:bg-zinc-700 transition-all h-full">
                            <div class="milk-type-icon">üêÑ</div>
                            <div class="milk-type-name text-gray-800 dark:text-gray-200">Cow Milk</div>
                            <div class="milk-type-price">‚Çπ40/L</div>
                        </div>
                    </label>
                </div>
            </div>

            <!-- Quantity Selection -->
            <div class="bg-white dark:bg-zinc-800 rounded-xl p-4 shadow-sm border border-gray-100 dark:border-zinc-700">
                <h2 class="text-lg font-bold text-gray-800 dark:text-gray-200 mb-3">Select Quantity</h2>
                <div class="grid grid-cols-4 gap-3">
                    <label class="cursor-pointer tooltip">
                        <input class="sr-only custom-radio" name="quantity" type="radio" value="0.5" />
                        <div
                            class="radio-content flex flex-col items-center justify-center p-3 rounded-lg border-2 border-gray-300 bg-white dark:bg-zinc-700 transition-all">
                            <span class="text-sm font-medium text-gray-800 dark:text-gray-200">0.5L</span>
                            <span class="text-xs text-gray-500 mt-1">‚Çπ30/day</span>
                        </div>
                        <span class="tooltiptext">‚Çπ30 per day</span>
                    </label>
                    <label class="cursor-pointer tooltip">
                        <input class="sr-only custom-radio" name="quantity" type="radio" value="0.7" />
                        <div
                            class="radio-content flex flex-col items-center justify-center p-3 rounded-lg border-2 border-gray-300 bg-white dark:bg-zinc-700 transition-all">
                            <span class="text-sm font-medium text-gray-800 dark:text-gray-200">0.7L</span>
                            <span class="text-xs text-gray-500 mt-1">‚Çπ38/day</span>
                        </div>
                        <span class="tooltiptext">‚Çπ38 per day</span>
                    </label>
                    <label class="cursor-pointer tooltip">
                        <input class="sr-only custom-radio" name="quantity" type="radio" value="1" checked />
                        <div
                            class="radio-content flex flex-col items-center justify-center p-3 rounded-lg border-2 border-gray-300 bg-white dark:bg-zinc-700 transition-all">
                            <span class="text-sm font-medium text-gray-800 dark:text-gray-200">1L</span>
                            <span class="text-xs text-gray-500 mt-1">‚Çπ50/day</span>
                        </div>
                        <span class="tooltiptext">‚Çπ50 per day</span>
                    </label>
                    <label class="cursor-pointer tooltip">
                        <input class="sr-only custom-radio" name="quantity" type="radio" value="1.25" />
                        <div
                            class="radio-content flex flex-col items-center justify-center p-3 rounded-lg border-2 border-gray-300 bg-white dark:bg-zinc-700 transition-all">
                            <span class="text-sm font-medium text-gray-800 dark:text-gray-200">1.25L</span>
                            <span class="text-xs text-gray-500 mt-1">‚Çπ65/day</span>
                        </div>
                        <span class="tooltiptext">‚Çπ65 per day</span>
                    </label>
                    <label class="cursor-pointer tooltip">
                        <input class="sr-only custom-radio" name="quantity" type="radio" value="1.5" />
                        <div
                            class="radio-content flex flex-col items-center justify-center p-3 rounded-lg border-2 border-gray-300 bg-white dark:bg-zinc-700 transition-all">
                            <span class="text-sm font-medium text-gray-800 dark:text-gray-200">1.5L</span>
                            <span class="text-xs text-gray-500 mt-1">‚Çπ75/day</span>
                        </div>
                        <span class="tooltiptext">‚Çπ75 per day</span>
                    </label>
                    <label class="cursor-pointer tooltip">
                        <input class="sr-only custom-radio" name="quantity" type="radio" value="1.7" />
                        <div
                            class="radio-content flex flex-col items-center justify-center p-3 rounded-lg border-2 border-gray-300 bg-white dark:bg-zinc-700 transition-all">
                            <span class="text-sm font-medium text-gray-800 dark:text-gray-200">1.7L</span>
                            <span class="text-xs text-gray-500 mt-1">‚Çπ85/day</span>
                        </div>
                        <span class="tooltiptext">‚Çπ85 per day</span>
                    </label>
                    <label class="cursor-pointer tooltip">
                        <input class="sr-only custom-radio" name="quantity" type="radio" value="2" />
                        <div
                            class="radio-content flex flex-col items-center justify-center p-3 rounded-lg border-2 border-gray-300 bg-white dark:bg-zinc-700 transition-all">
                            <span class="text-sm font-medium text-gray-800 dark:text-gray-200">2L</span>
                            <span class="text-xs text-gray-500 mt-1">‚Çπ90/day</span>
                        </div>
                        <span class="tooltiptext">‚Çπ90 per day</span>
                    </label>
                    <label class="cursor-pointer tooltip">
                        <input class="sr-only custom-radio" name="quantity" type="radio" value="2.25" />
                        <div
                            class="radio-content flex flex-col items-center justify-center p-3 rounded-lg border-2 border-gray-300 bg-white dark:bg-zinc-700 transition-all">
                            <span class="text-sm font-medium text-gray-800 dark:text-gray-200">2.25L</span>
                            <span class="text-xs text-gray-500 mt-1">‚Çπ100/day</span>
                        </div>
                        <span class="tooltiptext">‚Çπ100 per day</span>
                    </label>
                </div>
            </div>

            <!-- Frequency Selection -->
            <div class="bg-white dark:bg-zinc-800 rounded-xl p-4 shadow-sm border border-gray-100 dark:border-zinc-700">
                <h2 class="text-lg font-bold text-gray-800 dark:text-gray-200 mb-3">Select Frequency</h2>
                <div class="grid grid-cols-1 gap-4">
                    <label class="cursor-pointer">
                        <input class="sr-only custom-radio" name="frequency" type="radio" value="daily" checked />
                        <div
                            class="radio-content flex items-center justify-start p-4 rounded-lg border-2 border-gray-300 bg-white dark:bg-zinc-700 transition-all">
                            <span class="text-base font-medium text-gray-800 dark:text-gray-200">Daily</span>
                        </div>
                    </label>
                    <div id="daily-info" class="info-message">
                        <p class="text-sm text-gray-700 dark:text-gray-300">Milk will be delivered every day of the week
                        </p>
                    </div>

                    <label class="cursor-pointer">
                        <input class="sr-only custom-radio" name="frequency" type="radio" value="alternate" />
                        <div
                            class="radio-content flex items-center justify-start p-4 rounded-lg border-2 border-gray-300 bg-white dark:bg-zinc-700 transition-all">
                            <span class="text-base font-medium text-gray-800 dark:text-gray-200">Alternate Days</span>
                        </div>
                    </label>
                </div>

                <!-- Alternate Days Selection (Hidden by default) -->
                <div id="alternate-days-selector" class="hidden mt-4">
                    <div class="flex justify-between items-center mb-3">
                        <h3 class="text-md font-semibold text-gray-700 dark:text-gray-300">Select Delivery Days</h3>
                        <div class="flex gap-2">
                            <button type="button" id="select-all-days"
                                class="text-xs bg-zepto-blue text-white px-2 py-1 rounded">Select All</button>
                            <button type="button" id="clear-all-days"
                                class="text-xs bg-gray-200 text-gray-700 px-2 py-1 rounded">Clear All</button>
                        </div>
                    </div>
                    <div class="day-selector">
                        <label class="day-option">
                            <input type="checkbox" class="sr-only day-checkbox" name="delivery_days" value="monday">
                            <div class="day-content">
                                <span class="font-medium">Mon</span>
                            </div>
                        </label>
                        <label class="day-option">
                            <input type="checkbox" class="sr-only day-checkbox" name="delivery_days" value="tuesday">
                            <div class="day-content">
                                <span class="font-medium">Tue</span>
                            </div>
                        </label>
                        <label class="day-option">
                            <input type="checkbox" class="sr-only day-checkbox" name="delivery_days" value="wednesday">
                            <div class="day-content">
                                <span class="font-medium">Wed</span>
                            </div>
                        </label>
                        <label class="day-option">
                            <input type="checkbox" class="sr-only day-checkbox" name="delivery_days" value="thursday">
                            <div class="day-content">
                                <span class="font-medium">Thu</span>
                            </div>
                        </label>
                        <label class="day-option">
                            <input type="checkbox" class="sr-only day-checkbox" name="delivery_days" value="friday">
                            <div class="day-content">
                                <span class="font-medium">Fri</span>
                            </div>
                        </label>
                        <label class="day-option">
                            <input type="checkbox" class="sr-only day-checkbox" name="delivery_days" value="saturday">
                            <div class="day-content">
                                <span class="font-medium">Sat</span>
                            </div>
                        </label>
                        <label class="day-option">
                            <input type="checkbox" class="sr-only day-checkbox" name="delivery_days" value="sunday">
                            <div class="day-content">
                                <span class="font-medium">Sun</span>
                            </div>
                        </label>
                    </div>
                    <div id="selected-days-summary" class="mt-2 text-sm text-gray-600 dark:text-gray-400"></div>

                    <!-- Alternate Days Confirmation Button -->
                    <div id="alternate-confirm-section" class="hidden mt-4">
                        <button id="confirm-alternate-days"
                            class="w-full bg-zepto-blue text-white font-bold py-3 px-4 rounded-lg text-center hover:bg-blue-700 transition-all duration-200">
                            Confirm Selected Days
                        </button>
                    </div>

                    <div id="alternate-info" class="info-message mt-3">
                        <p class="text-sm text-gray-700 dark:text-gray-300">Select the days you want milk delivery</p>
                    </div>

                    <!-- Selected Days Summary (shown after confirmation) -->
                    <div id="confirmed-days-summary"
                        class="hidden mt-4 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800">
                        <p class="text-sm text-green-700 dark:text-green-300 font-medium" id="confirmed-days-text"></p>
                    </div>
                </div>
            </div>

            <!-- Delivery Time Slot -->
            <div class="bg-white dark:bg-zinc-800 rounded-xl p-4 shadow-sm border border-gray-100 dark:border-zinc-700">
                <h2 class="text-lg font-bold text-gray-800 dark:text-gray-200 mb-3">Select Delivery Time Slot</h2>
                <div class="grid grid-cols-1 gap-4">
                    <label
                        class="flex items-center justify-between p-4 rounded-lg border-2 border-gray-300 bg-white dark:bg-zinc-700 cursor-pointer transition-all">
                        <div class="flex items-center">
                            <span class="material-symbols-outlined mr-2 text-gray-600">wb_twilight</span>
                            <span class="text-base font-medium text-gray-800 dark:text-gray-200">Morning (7-9 AM)</span>
                        </div>
                        <input class="time-slot-checkbox sr-only" name="time_slot" type="checkbox" value="morning"
                            checked />
                        <div
                            class="time-slot-content relative w-6 h-6 border-2 border-gray-300 rounded flex items-center justify-center">
                            <span
                                class="checkmark material-symbols-outlined text-zepto-blue dark:text-zepto-yellow hidden text-lg">check</span>
                        </div>
                    </label>
                    <label
                        class="flex items-center justify-between p-4 rounded-lg border-2 border-gray-300 bg-white dark:bg-zinc-700 cursor-pointer transition-all">
                        <div class="flex items-center">
                            <span class="material-symbols-outlined mr-2 text-gray-600">nights_stay</span>
                            <span class="text-base font-medium text-gray-800 dark:text-gray-200">Evening (6-8 PM)</span>
                        </div>
                        <input class="time-slot-checkbox sr-only" name="time_slot" type="checkbox" value="evening" />
                        <div
                            class="time-slot-content relative w-6 h-6 border-2 border-gray-300 rounded flex items-center justify-center">
                            <span
                                class="checkmark material-symbols-outlined text-zepto-blue dark:text-zepto-yellow hidden text-lg">check</span>
                        </div>
                    </label>
                </div>
            </div>

            <!-- Subscription Summary -->
            <div
                class="bg-white dark:bg-zinc-800 p-4 rounded-xl border border-gray-100 dark:border-zinc-700 shadow-sm sticky-summary">
                <h3 class="text-lg font-bold text-gray-800 dark:text-gray-200 mb-3 flex items-center">
                    <span class="material-symbols-outlined mr-2">summarize</span>
                    Subscription Summary
                </h3>
                <div class="flex justify-between items-center mb-2">
                    <div class="flex items-center">
                        <div>
                            <p class="text-base font-medium text-gray-800 dark:text-gray-200" id="summary-text">Buffalo
                                Milk, 1L, Daily</p>
                            <p class="text-sm text-gray-600 dark:text-gray-400" id="time-slot-text">Morning Delivery
                                (7-9 AM)</p>
                        </div>
                    </div>
                    <p class="text-lg font-bold text-gray-800 dark:text-gray-200" id="daily-price">‚Çπ50/day</p>
                </div>
                <div class="border-t border-gray-200 dark:border-zinc-600 my-3"></div>
                <div class="flex justify-between items-center font-bold">
                    <p class="text-base text-gray-800 dark:text-gray-200">Estimated Monthly Price</p>
                    <p class="text-xl text-zepto-blue dark:text-zepto-yellow" id="monthly-price">‚Çπ1500/month</p>
                </div>
                <div class="mt-2 text-xs text-gray-500" id="price-breakdown">
                    ‚Çπ50/day √ó 30 days = ‚Çπ1500/month
                </div>
            </div>
        </main>

        <!-- Footer with Confirm Button -->
        <footer
            class="p-4 bg-white/80 dark:bg-zinc-800/80 backdrop-blur-sm sticky bottom-0 border-t border-gray-200 dark:border-zinc-700">
            <button id="confirm-btn" onclick="confirmSubscription(event)"
                class="w-full bg-primary text-background-dark font-bold py-3 px-4 rounded-lg text-center hover:bg-yellow-500 transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98] focus-visible:focus">
                Confirm Subscription
            </button>
            <div id="progress-bar" class="progress-bar hidden">
                <div class="progress" id="progress"></div>
            </div>
        </footer>
    </div>

    <script>
        // Navigation functions
        function goBack() {
            window.history.back();
        }

        // Track if alternate days are confirmed
        let alternateDaysConfirmed = false;
        let confirmedDays = [];

        // Update subscription summary when options change
        function updateSummary() {
            const milkType = document.querySelector('input[name="milk_type"]:checked').value;
            const quantity = document.querySelector('input[name="quantity"]:checked').value;
            const frequency = document.querySelector('input[name="frequency"]:checked').value;
            const morningChecked = document.querySelector('input[value="morning"]').checked;
            const eveningChecked = document.querySelector('input[value="evening"]').checked;

            // Calculate price based on selections
            let pricePerDay = 50; // Base price for 1L Buffalo Milk

            // Adjust price based on milk type
            if (milkType === 'cow') pricePerDay = 40;

            // Adjust price based on quantity
            const quantityMultipliers = {
                '0.5': 0.6,
                '0.7': 0.75,
                '1': 1,
                '1.25': 1.3,
                '1.5': 1.5,
                '1.7': 1.7,
                '2': 1.8,
                '2.25': 2.0
            };
            pricePerDay *= quantityMultipliers[quantity] || 1;

            // Adjust price based on frequency and delivery times
            let deliveryDaysPerMonth = 30; // Default for daily

            if (frequency === 'alternate') {
                // Use confirmed days if available, otherwise use selected days
                const daysToUse = alternateDaysConfirmed ? confirmedDays :
                    Array.from(document.querySelectorAll('input[name="delivery_days"]:checked')).map(cb => cb.value);

                deliveryDaysPerMonth = daysToUse.length * 4; // Approximately 4 weeks in a month
            }

            // If both morning and evening are selected, add 50% to the price
            if (morningChecked && eveningChecked) {
                pricePerDay *= 1.5;
            }

            // Calculate monthly price
            const monthlyPrice = Math.round(pricePerDay * deliveryDaysPerMonth);

            // Update the summary display
            const milkTypeText = milkType.charAt(0).toUpperCase() + milkType.slice(1) + ' Milk';
            const frequencyText = frequency.charAt(0).toUpperCase() + frequency.slice(1);

            let timeSlotText = '';
            if (morningChecked && eveningChecked) {
                timeSlotText = 'Morning & Evening Delivery';
            } else if (morningChecked) {
                timeSlotText = 'Morning Delivery (7-9 AM)';
            } else if (eveningChecked) {
                timeSlotText = 'Evening Delivery (6-8 PM)';
            }

            // Update summary text
            document.getElementById('summary-text').textContent = `${milkTypeText}, ${quantity}L, ${frequencyText}`;
            document.getElementById('time-slot-text').textContent = timeSlotText;
            document.getElementById('daily-price').textContent = `‚Çπ${pricePerDay.toFixed(0)}/day`;
            document.getElementById('monthly-price').textContent = `‚Çπ${monthlyPrice}/month`;

            // Update price breakdown
            const breakdownText = frequency === 'daily'
                ? `‚Çπ${pricePerDay.toFixed(0)}/day √ó 30 days = ‚Çπ${monthlyPrice}/month`
                : `‚Çπ${pricePerDay.toFixed(0)}/day √ó ${deliveryDaysPerMonth} days = ‚Çπ${monthlyPrice}/month`;
            document.getElementById('price-breakdown').textContent = breakdownText;

            // No icon in summary

            // Update confirm button state
            updateConfirmButtonState();
        }

        // Update selected days summary
        function updateSelectedDaysSummary() {
            const selectedDays = document.querySelectorAll('input[name="delivery_days"]:checked');
            const dayNames = Array.from(selectedDays).map(day => {
                const dayValue = day.value;
                return dayValue.charAt(0).toUpperCase() + dayValue.slice(1, 3);
            });

            const summaryElement = document.getElementById('selected-days-summary');
            if (dayNames.length > 0) {
                summaryElement.textContent = `Selected: ${dayNames.join(', ')}`;
                summaryElement.classList.remove('hidden');

                // Show confirm button for alternate days
                document.getElementById('alternate-confirm-section').classList.remove('hidden');
            } else {
                summaryElement.textContent = '';
                summaryElement.classList.add('hidden');
                document.getElementById('alternate-confirm-section').classList.add('hidden');
            }
        }

        // Update confirmed days summary
        function updateConfirmedDaysSummary() {
            if (confirmedDays.length > 0) {
                const dayNames = confirmedDays.map(day => {
                    return day.charAt(0).toUpperCase() + day.slice(1, 3);
                });

                document.getElementById('confirmed-days-text').textContent =
                    `Milk will be delivered on ${dayNames.join(', ')}`;
                document.getElementById('confirmed-days-summary').classList.remove('hidden');

                // Hide the selection interface after confirmation
                document.querySelector('.day-selector').classList.add('hidden');
                document.getElementById('selected-days-summary').classList.add('hidden');
                document.getElementById('alternate-confirm-section').classList.add('hidden');
                document.getElementById('alternate-info').classList.add('hidden');

                // Show edit button
                if (!document.getElementById('edit-days-btn')) {
                    const editButton = document.createElement('button');
                    editButton.id = 'edit-days-btn';
                    editButton.type = 'button';
                    editButton.className = 'text-xs bg-gray-200 text-gray-700 px-2 py-1 rounded mt-2';
                    editButton.textContent = 'Edit Days';
                    editButton.onclick = editConfirmedDays;
                    document.getElementById('confirmed-days-summary').appendChild(editButton);
                }
            }
        }

        // Edit confirmed days
        function editConfirmedDays() {
            alternateDaysConfirmed = false;
            confirmedDays = [];

            // Show the selection interface again
            document.querySelector('.day-selector').classList.remove('hidden');
            document.getElementById('selected-days-summary').classList.remove('hidden');
            document.getElementById('alternate-confirm-section').classList.remove('hidden');
            document.getElementById('alternate-info').classList.remove('hidden');
            document.getElementById('confirmed-days-summary').classList.add('hidden');

            // Update summary
            updateSummary();
        }

        // Confirm alternate days selection
        function confirmAlternateDays() {
            const selectedDays = document.querySelectorAll('input[name="delivery_days"]:checked');

            if (selectedDays.length === 0) {
                alert('Please select at least one day for alternate delivery');
                return;
            }

            // Store the confirmed days
            confirmedDays = Array.from(selectedDays).map(cb => cb.value);
            alternateDaysConfirmed = true;

            // Update the UI
            updateConfirmedDaysSummary();
            updateSummary();

            // Show success message
            showToast('Delivery days confirmed!');
        }

        // Update confirm button state based on selections
        function updateConfirmButtonState() {
            const confirmBtn = document.getElementById('confirm-btn');
            const frequency = document.querySelector('input[name="frequency"]:checked').value;
            const morningChecked = document.querySelector('input[value="morning"]').checked;
            const eveningChecked = document.querySelector('input[value="evening"]').checked;

            let isValid = true;

            // Check if at least one time slot is selected
            if (!morningChecked && !eveningChecked) {
                isValid = false;
            }

            // Check if alternate days has confirmed days
            if (frequency === 'alternate') {
                if (!alternateDaysConfirmed) {
                    isValid = false;
                }
            }

            if (isValid) {
                confirmBtn.disabled = false;
                confirmBtn.classList.remove('opacity-50', 'cursor-not-allowed');
            } else {
                confirmBtn.disabled = true;
                confirmBtn.classList.add('opacity-50', 'cursor-not-allowed');
            }
        }

        // Show toast notification
        function showToast(message) {
            // Create toast element if it doesn't exist
            let toast = document.getElementById('toast');
            if (!toast) {
                toast = document.createElement('div');
                toast.id = 'toast';
                toast.className = 'fixed bottom-20 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-4 py-2 rounded-lg shadow-lg z-50 transition-opacity duration-300 opacity-0';
                document.body.appendChild(toast);
            }

            toast.textContent = message;
            toast.classList.remove('opacity-0');
            toast.classList.add('opacity-100');

            // Hide toast after 3 seconds
            setTimeout(() => {
                toast.classList.remove('opacity-100');
                toast.classList.add('opacity-0');
            }, 3000);
        }

        // Confirm subscription
        function confirmSubscription(event) {
            event.preventDefault();

            // Show loading state
            const confirmBtn = document.getElementById('confirm-btn');
            const originalText = confirmBtn.textContent;
            confirmBtn.innerHTML = '<i class="fas fa-spinner spinner mr-2"></i> Processing...';
            confirmBtn.disabled = true;

            // Show progress bar
            const progressBar = document.getElementById('progress-bar');
            const progress = document.getElementById('progress');
            progressBar.classList.remove('hidden');

            // Simulate progress
            let width = 0;
            const interval = setInterval(() => {
                if (width >= 100) {
                    clearInterval(interval);

                    // Show success message
                    showToast('Subscription confirmed successfully!');

                    // Redirect to success page after short delay
                    setTimeout(() => {
                        window.location.href = 'Subscription Success Page.html';
                    }, 800);
                } else {
                    width += 10;
                    progress.style.width = width + '%';
                }
            }, 100);
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function () {
            // Set up event listeners for all radio buttons and checkboxes
            document.querySelectorAll('input[type="radio"], input[type="checkbox"]').forEach(input => {
                input.addEventListener('change', updateSummary);
            });

            // Set up event listeners for milk type selection
            document.querySelectorAll('input[name="milk_type"]').forEach(radio => {
                radio.addEventListener('change', function () {
                    // Update visual selection state
                    document.querySelectorAll('.milk-type-option').forEach(option => {
                        option.classList.remove('selected');
                    });
                    if (this.checked) {
                        this.closest('.milk-type-option').classList.add('selected');
                    }
                });
            });

            // Set up event listeners for frequency selection
            document.querySelectorAll('input[name="frequency"]').forEach(radio => {
                radio.addEventListener('change', function () {
                    if (this.value === 'alternate') {
                        document.getElementById('alternate-days-selector').classList.remove('hidden');
                        document.getElementById('daily-info').classList.add('hidden');
                    } else {
                        document.getElementById('alternate-days-selector').classList.add('hidden');
                        document.getElementById('daily-info').classList.remove('hidden');
                        alternateDaysConfirmed = false;
                        confirmedDays = [];
                        document.getElementById('confirmed-days-summary').classList.add('hidden');
                        document.querySelector('.day-selector').classList.remove('hidden');
                        document.getElementById('selected-days-summary').classList.remove('hidden');
                        document.getElementById('alternate-info').classList.remove('hidden');
                    }
                    updateSummary();
                });
            });

            // Set up event listeners for day selection
            document.querySelectorAll('input[name="delivery_days"]').forEach(checkbox => {
                checkbox.addEventListener('change', function () {
                    updateSelectedDaysSummary();
                    updateSummary();
                });
            });

            // Set up event listeners for time slot selection
            document.querySelectorAll('.time-slot-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', function () {
                    // Update visual state
                    const content = this.nextElementSibling;
                    if (this.checked) {
                        content.querySelector('.checkmark').classList.remove('hidden');
                    } else {
                        content.querySelector('.checkmark').classList.add('hidden');
                    }
                    updateSummary();
                });
            });

            // Set up select all and clear all buttons for days
            document.getElementById('select-all-days').addEventListener('click', function () {
                document.querySelectorAll('input[name="delivery_days"]').forEach(checkbox => {
                    checkbox.checked = true;
                });
                updateSelectedDaysSummary();
                updateSummary();
            });

            document.getElementById('clear-all-days').addEventListener('click', function () {
                document.querySelectorAll('input[name="delivery_days"]').forEach(checkbox => {
                    checkbox.checked = false;
                });
                updateSelectedDaysSummary();
                updateSummary();
            });

            // Set up confirm alternate days button
            document.getElementById('confirm-alternate-days').addEventListener('click', confirmAlternateDays);

            // Initialize milk type selection state
            document.querySelector('input[name="milk_type"]:checked').closest('.milk-type-option').classList.add('selected');

            // Initialize time slot checkmarks
            document.querySelectorAll('.time-slot-checkbox').forEach(checkbox => {
                const content = checkbox.nextElementSibling;
                if (checkbox.checked) {
                    content.querySelector('.checkmark').classList.remove('hidden');
                }
            });

            // Initial summary update
            updateSummary();
        });
    </script>
</body>

</html>