<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Taaza - Milk Subscription</title>
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#FFD700",
                        "background-light": "#FFFFFF",
                        "background-dark": "#0C2D57",
                        "zepto-blue": "#0C2D57",
                        "zepto-yellow": "#FFD700",
                        "zepto-light-bg": "#F8F4E9",
                        "zepto-manage-blue": "#4A7B9D",
                        "zepto-order-red": "#D5715C",
                        "zepto-green": "#10B981",
                        "zepto-gray": "#6B7280",
                    },
                    fontFamily: {
                        "display": ["Space Grotesk", "sans-serif"]
                    },
                    borderRadius: {
                        "DEFAULT": "0.5rem",
                        "lg": "0.75rem",
                        "xl": "1rem",
                        "full": "9999px"
                    },
                },
            },
        }
    </script>
    <style>
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
        }

        .time-slot-card {
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 16px;
            transition: all 0.3s ease;
        }

        .time-slot-card.active {
            border-color: #0C2D57;
            box-shadow: 0 4px 12px rgba(12, 45, 87, 0.15);
        }

        .time-slot-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px;
            background-color: white;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .dark .time-slot-header {
            background-color: #1f2937;
        }

        .time-slot-header:hover {
            background-color: #f9fafb;
        }

        .dark .time-slot-header:hover {
            background-color: #374151;
        }

        .time-slot-title {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .time-slot-icon {
            font-size: 24px;
            color: #0C2D57;
        }

        .dark .time-slot-icon {
            color: #FFD700;
        }

        .time-slot-name {
            font-weight: 600;
            font-size: 16px;
            color: #1f2937;
        }

        .dark .time-slot-name {
            color: #f9fafb;
        }

        .time-slot-time {
            font-size: 14px;
            color: #6b7280;
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 44px;
            height: 24px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #e5e7eb;
            transition: .4s;
            border-radius: 24px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked+.toggle-slider {
            background-color: #0C2D57;
        }

        .dark input:checked+.toggle-slider {
            background-color: #FFD700;
        }

        input:checked+.toggle-slider:before {
            transform: translateX(20px);
        }

        .time-slot-content {
            padding: 0;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease, padding 0.3s ease;
        }

        .time-slot-content.expanded {
            padding: 16px;
            max-height: 500px;
        }

        .option-group {
            margin-bottom: 16px;
        }

        .option-group:last-child {
            margin-bottom: 0;
        }

        .option-group-title {
            font-size: 14px;
            font-weight: 600;
            color: #374151;
            margin-bottom: 8px;
        }

        .dark .option-group-title {
            color: #d1d5db;
        }

        .quantity-options {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
        }

        .quantity-option {
            text-align: center;
            padding: 10px 6px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            background: white;
        }

        .dark .quantity-option {
            background: #374151;
            border-color: #4b5563;
            color: #f9fafb;
        }

        .quantity-option:hover {
            border-color: #0C2D57;
            transform: translateY(-2px);
        }

        .dark .quantity-option:hover {
            border-color: #FFD700;
        }

        .quantity-option.selected {
            background-color: rgba(12, 45, 87, 0.1);
            border-color: #0C2D57;
            font-weight: 600;
            box-shadow: 0 2px 4px rgba(12, 45, 87, 0.1);
        }

        .dark .quantity-option.selected {
            background-color: rgba(255, 215, 0, 0.2);
            border-color: #FFD700;
        }

        .quantity-label {
            font-size: 14px;
            font-weight: 500;
        }

        .quantity-price {
            font-size: 12px;
            color: #6B7280;
            margin-top: 2px;
        }

        .dark .quantity-price {
            color: #9ca3af;
        }

        .frequency-options {
            display: flex;
            gap: 12px;
        }

        .frequency-option {
            flex: 1;
            text-align: center;
            padding: 12px 8px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            background: white;
        }

        .dark .frequency-option {
            background: #374151;
            border-color: #4b5563;
            color: #f9fafb;
        }

        .frequency-option:hover {
            border-color: #0C2D57;
            transform: translateY(-2px);
        }

        .dark .frequency-option:hover {
            border-color: #FFD700;
        }

        .frequency-option.selected {
            background-color: rgba(12, 45, 87, 0.1);
            border-color: #0C2D57;
            font-weight: 600;
            box-shadow: 0 2px 4px rgba(12, 45, 87, 0.1);
        }

        .dark .frequency-option.selected {
            background-color: rgba(255, 215, 0, 0.2);
            border-color: #FFD700;
        }

        .frequency-label {
            font-size: 14px;
            font-weight: 500;
        }

        .frequency-desc {
            font-size: 12px;
            color: #6B7280;
            margin-top: 4px;
        }

        .dark .frequency-desc {
            color: #9ca3af;
        }

        .time-slot-summary {
            background-color: #f3f4f6;
            border-radius: 8px;
            padding: 12px;
            margin-top: 12px;
            font-size: 14px;
            color: #374151;
        }

        .dark .time-slot-summary {
            background-color: #374151;
            color: #d1d5db;
        }

        .time-slot-summary strong {
            color: #0C2D57;
        }

        .dark .time-slot-summary strong {
            color: #FFD700;
        }

        .day-selector {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .day-option {
            flex: 1;
            min-width: calc(33.333% - 0.5rem);
        }

        .day-checkbox:checked+.day-content {
            background-color: #0C2D57;
            color: white;
            border-color: #0C2D57;
        }

        .dark .day-checkbox:checked+.day-content {
            background-color: #FFD700;
            color: #0C2D57;
        }

        .day-content {
            padding: 0.75rem;
            border: 2px solid #e5e7eb;
            border-radius: 0.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            background-color: white;
        }

        .dark .day-content {
            background-color: #374151;
            border-color: #4b5563;
            color: #f9fafb;
        }

        .day-content:hover {
            border-color: #0C2D57;
        }

        .dark .day-content:hover {
            border-color: #FFD700;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background-color: white;
            border-radius: 12px;
            padding: 24px;
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .dark .modal-content {
            background-color: #1f2937;
            color: white;
        }

        .sticky-summary {
            position: sticky;
            top: 80px;
            z-index: 10;
        }

        .spinner {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .progress-bar {
            height: 4px;
            background-color: #e5e7eb;
            border-radius: 2px;
            overflow: hidden;
            margin-top: 8px;
        }

        .progress {
            height: 100%;
            background-color: #10B981;
            width: 0%;
            transition: width 0.3s ease;
        }

        .toast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #0C2D57;
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .dark .toast {
            background-color: #FFD700;
            color: #0C2D57;
        }

        .toast.show {
            opacity: 1;
        }

        /* Custom animations */
        .slide-up {
            animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp {
            from {
                transform: translateY(10px);
                opacity: 0;
            }

            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        /* Accessibility improvements */
        .focus-visible:focus {
            outline: 2px solid #FFD700;
            outline-offset: 2px;
        }

        /* Milk type selection improvements */
        .milk-type-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        .milk-type-option {
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            background-color: white;
        }

        .dark .milk-type-option {
            background-color: #374151;
            border-color: #4b5563;
        }

        .milk-type-option:hover {
            border-color: #0C2D57;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .dark .milk-type-option:hover {
            border-color: #FFD700;
        }

        .milk-type-option.selected {
            border-color: #0C2D57;
            background-color: rgba(12, 45, 87, 0.05);
            box-shadow: 0 4px 12px rgba(12, 45, 87, 0.15);
        }

        .dark .milk-type-option.selected {
            border-color: #FFD700;
            background-color: rgba(255, 215, 0, 0.1);
        }

        .milk-type-icon {
            font-size: 32px;
            margin-bottom: 8px;
        }

        .milk-type-name {
            font-weight: 600;
            font-size: 16px;
            margin-bottom: 4px;
        }

        .milk-type-price {
            font-size: 14px;
            color: #6b7280;
        }

        .dark .milk-type-price {
            color: #9ca3af;
        }

        /* Time slot milk type selection */
        .slot-milk-type {
            margin-bottom: 16px;
        }

        .slot-milk-type-title {
            font-size: 14px;
            font-weight: 600;
            color: #374151;
            margin-bottom: 8px;
        }

        .dark .slot-milk-type-title {
            color: #d1d5db;
        }

        .slot-milk-options {
            display: flex;
            gap: 8px;
        }

        .slot-milk-option {
            flex: 1;
            text-align: center;
            padding: 10px 6px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            background: white;
        }

        .dark .slot-milk-option {
            background: #374151;
            border-color: #4b5563;
            color: #f9fafb;
        }

        .slot-milk-option:hover {
            border-color: #0C2D57;
            transform: translateY(-2px);
        }

        .dark .slot-milk-option:hover {
            border-color: #FFD700;
        }

        .slot-milk-option.selected {
            background-color: rgba(12, 45, 87, 0.1);
            border-color: #0C2D57;
            font-weight: 600;
            box-shadow: 0 2px 4px rgba(12, 45, 87, 0.1);
        }

        .dark .slot-milk-option.selected {
            background-color: rgba(255, 215, 0, 0.2);
            border-color: #FFD700;
        }

        .slot-milk-label {
            font-size: 14px;
            font-weight: 500;
        }

        .slot-milk-price {
            font-size: 12px;
            color: #6B7280;
            margin-top: 2px;
        }

        .dark .slot-milk-price {
            color: #9ca3af;
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
</head>

<body class="font-display bg-background-light dark:bg-zinc-900 text-background-dark dark:text-background-light">
    <div class="flex flex-col min-h-screen">
        <!-- Header -->
        <header class="bg-background-dark text-white p-4 sticky top-0 z-20 shadow-md">
            <div class="container mx-auto flex items-center justify-between">
                <button class="text-white focus-visible:focus rounded-lg p-2 hover:bg-blue-900 transition-colors"
                    onclick="goBack()" aria-label="Go back">
                    <span class="material-symbols-outlined">arrow_back</span>
                </button>
                <h1 class="text-lg font-bold">New Milk Subscription</h1>
                <div class="w-8"></div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="flex-grow p-4 space-y-6 slide-up">
            <!-- Milk Type Selection -->
            <div class="bg-white dark:bg-zinc-800 rounded-xl p-4 shadow-sm border border-gray-100 dark:border-zinc-700">
                <h2 class="text-lg font-bold text-gray-800 dark:text-gray-200 mb-4">Select Milk Type</h2>
                <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">Choose your preferred milk type for each
                    delivery slot</p>

                <div class="milk-type-options">
                    <!-- Buffalo Milk Option -->
                    <label class="milk-type-option selected">
                        <input class="sr-only" name="milk_type" type="radio" value="buffalo" checked />
                        <div class="milk-type-icon">üêÉ</div>
                        <div class="milk-type-name">Buffalo Milk</div>
                        <div class="milk-type-price">‚Çπ50/L - Rich & Creamy</div>
                    </label>

                    <!-- Cow Milk Option -->
                    <label class="milk-type-option">
                        <input class="sr-only" name="milk_type" type="radio" value="cow" />
                        <div class="milk-type-icon">üêÑ</div>
                        <div class="milk-type-name">Cow Milk</div>
                        <div class="milk-type-price">‚Çπ40/L - Light & Healthy</div>
                    </label>
                </div>
            </div>

            <!-- Delivery Time Slot with Quantity and Frequency Selection -->
            <div class="bg-white dark:bg-zinc-800 rounded-xl p-4 shadow-sm border border-gray-100 dark:border-zinc-700">
                <h2 class="text-lg font-bold text-gray-800 dark:text-gray-200 mb-3">Delivery Schedule</h2>
                <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">Customize your delivery times, quantities, and
                    frequencies</p>

                <!-- Morning Time Slot Card -->
                <div class="time-slot-card active">
                    <div class="time-slot-header" onclick="toggleTimeSlot('morning')">
                        <div class="time-slot-title">
                            <span class="time-slot-icon">‚òÄÔ∏è</span>
                            <div>
                                <div class="time-slot-name">Morning Delivery</div>
                                <div class="time-slot-time">7:00 AM - 9:00 AM</div>
                            </div>
                        </div>
                        <div class="time-slot-toggle">
                            <span class="text-sm text-gray-600 dark:text-gray-400 mr-2">OFF</span>
                            <label class="toggle-switch">
                                <input type="checkbox" checked id="morning-toggle">
                                <span class="toggle-slider"></span>
                            </label>
                            <span class="text-sm text-zepto-yellow ml-2">ON</span>
                        </div>
                    </div>
                    <div class="time-slot-content expanded" id="morning-content">
                        <!-- Milk Type Selection for Morning Slot -->
                        <div class="slot-milk-type">
                            <div class="slot-milk-type-title">Milk Type for Morning</div>
                            <div class="slot-milk-options">
                                <label class="slot-milk-option selected" data-value="buffalo">
                                    <div class="slot-milk-label">Buffalo</div>
                                    <div class="slot-milk-price">‚Çπ50/L</div>
                                </label>
                                <label class="slot-milk-option" data-value="cow">
                                    <div class="slot-milk-label">Cow</div>
                                    <div class="slot-milk-price">‚Çπ40/L</div>
                                </label>
                            </div>
                        </div>

                        <!-- Quantity Selection -->
                        <div class="option-group">
                            <div class="option-group-title">Select Quantity</div>
                            <div class="quantity-options">
                                <label class="quantity-option" data-value="0.50">
                                    <div class="quantity-label">0.50L</div>
                                    <div class="quantity-price">‚Çπ25</div>
                                </label>
                                <label class="quantity-option" data-value="0.75">
                                    <div class="quantity-label">0.75L</div>
                                    <div class="quantity-price">‚Çπ37.5</div>
                                </label>
                                <label class="quantity-option selected" data-value="1.00">
                                    <div class="quantity-label">1.00L</div>
                                    <div class="quantity-price">‚Çπ50</div>
                                </label>
                                <label class="quantity-option" data-value="1.25">
                                    <div class="quantity-label">1.25L</div>
                                    <div class="quantity-price">‚Çπ62.5</div>
                                </label>
                                <label class="quantity-option" data-value="1.50">
                                    <div class="quantity-label">1.50L</div>
                                    <div class="quantity-price">‚Çπ75</div>
                                </label>
                            </div>
                        </div>

                        <!-- Frequency Selection -->
                        <div class="option-group">
                            <div class="option-group-title">Select Frequency</div>
                            <div class="frequency-options">
                                <label class="frequency-option selected" data-value="daily">
                                    <div class="frequency-label">Daily</div>
                                    <div class="frequency-desc">Every day</div>
                                </label>
                                <label class="frequency-option" data-value="alternate">
                                    <div class="frequency-label">Alternate Days</div>
                                    <div class="frequency-desc">Select specific days</div>
                                </label>
                            </div>
                        </div>

                        <!-- Summary -->
                        <div class="time-slot-summary">
                            <strong>Morning Summary:</strong> 1.00L Buffalo Milk delivered daily at 7:00-9:00 AM for
                            ‚Çπ50/day
                        </div>
                    </div>
                </div>

                <!-- Evening Time Slot Card -->
                <div class="time-slot-card">
                    <div class="time-slot-header" onclick="toggleTimeSlot('evening')">
                        <div class="time-slot-title">
                            <span class="time-slot-icon">üåô</span>
                            <div>
                                <div class="time-slot-name">Evening Delivery</div>
                                <div class="time-slot-time">6:00 PM - 8:00 PM</div>
                            </div>
                        </div>
                        <div class="time-slot-toggle">
                            <span class="text-sm text-gray-600 dark:text-gray-400 mr-2">OFF</span>
                            <label class="toggle-switch">
                                <input type="checkbox" id="evening-toggle">
                                <span class="toggle-slider"></span>
                            </label>
                            <span class="text-sm text-zepto-yellow ml-2">ON</span>
                        </div>
                    </div>
                    <div class="time-slot-content" id="evening-content">
                        <!-- Milk Type Selection for Evening Slot -->
                        <div class="slot-milk-type">
                            <div class="slot-milk-type-title">Milk Type for Evening</div>
                            <div class="slot-milk-options">
                                <label class="slot-milk-option" data-value="buffalo">
                                    <div class="slot-milk-label">Buffalo</div>
                                    <div class="slot-milk-price">‚Çπ50/L</div>
                                </label>
                                <label class="slot-milk-option selected" data-value="cow">
                                    <div class="slot-milk-label">Cow</div>
                                    <div class="slot-milk-price">‚Çπ40/L</div>
                                </label>
                            </div>
                        </div>

                        <!-- Quantity Selection -->
                        <div class="option-group">
                            <div class="option-group-title">Select Quantity</div>
                            <div class="quantity-options">
                                <label class="quantity-option selected" data-value="0.50">
                                    <div class="quantity-label">0.50L</div>
                                    <div class="quantity-price">‚Çπ20</div>
                                </label>
                                <label class="quantity-option" data-value="0.75">
                                    <div class="quantity-label">0.75L</div>
                                    <div class="quantity-price">‚Çπ30</div>
                                </label>
                                <label class="quantity-option" data-value="1.00">
                                    <div class="quantity-label">1.00L</div>
                                    <div class="quantity-price">‚Çπ40</div>
                                </label>
                                <label class="quantity-option" data-value="1.25">
                                    <div class="quantity-label">1.25L</div>
                                    <div class="quantity-price">‚Çπ50</div>
                                </label>
                                <label class="quantity-option" data-value="1.50">
                                    <div class="quantity-label">1.50L</div>
                                    <div class="quantity-price">‚Çπ60</div>
                                </label>
                            </div>
                        </div>

                        <!-- Frequency Selection -->
                        <div class="option-group">
                            <div class="option-group-title">Select Frequency</div>
                            <div class="frequency-options">
                                <label class="frequency-option" data-value="daily">
                                    <div class="frequency-label">Daily</div>
                                    <div class="frequency-desc">Every day</div>
                                </label>
                                <label class="frequency-option selected" data-value="alternate">
                                    <div class="frequency-label">Alternate Days</div>
                                    <div class="frequency-desc">Select specific days</div>
                                </label>
                            </div>
                        </div>

                        <!-- Summary -->
                        <div class="time-slot-summary">
                            <strong>Evening Summary:</strong> 0.50L Cow Milk delivered on alternate days at 6:00-8:00 PM
                            for ‚Çπ20/day
                        </div>
                    </div>
                </div>
            </div>

            <!-- Subscription Summary -->
            <div
                class="bg-white dark:bg-zinc-800 p-4 rounded-xl border border-gray-100 dark:border-zinc-700 shadow-sm sticky-summary">
                <h3 class="text-lg font-bold text-gray-800 dark:text-gray-200 mb-3 flex items-center">
                    <span class="material-symbols-outlined mr-2">receipt_long</span>
                    Subscription Summary
                </h3>
                <div class="space-y-2 mb-3">
                    <div id="summary-morning" class="space-y-1">
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-gray-600 dark:text-gray-400">Morning (7-9 AM)</span>
                            <span class="text-sm font-medium text-gray-800 dark:text-gray-200">1.00L Buffalo -
                                ‚Çπ50</span>
                        </div>
                        <div class="text-xs text-gray-500 dark:text-gray-400 pl-2" id="summary-morning-frequency">
                            Frequency: Daily</div>
                    </div>
                    <div id="summary-evening" class="space-y-1 hidden">
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-gray-600 dark:text-gray-400">Evening (6-8 PM)</span>
                            <span class="text-sm font-medium text-gray-800 dark:text-gray-200">0.50L Cow - ‚Çπ20</span>
                        </div>
                        <div class="text-xs text-gray-500 dark:text-gray-400 pl-2" id="summary-evening-frequency">
                            Frequency: Alternate Days</div>
                    </div>
                </div>
                <div class="border-t border-gray-200 dark:border-zinc-600 my-3"></div>
                <div class="flex justify-between items-center font-bold">
                    <p class="text-base text-gray-800 dark:text-gray-200">Estimated Monthly Price</p>
                    <p class="text-xl text-zepto-blue dark:text-zepto-yellow" id="monthly-price">‚Çπ1500/month</p>
                </div>
                <div class="mt-2 text-xs text-gray-500 dark:text-gray-400" id="price-breakdown">
                    Morning: ‚Çπ50/day √ó 30 days = ‚Çπ1500<br>
                    Total: ‚Çπ1500/month
                </div>
            </div>
        </main>

        <!-- Footer with Confirm Button -->
        <footer
            class="p-4 bg-white/80 dark:bg-zinc-800/80 backdrop-blur-sm sticky bottom-0 border-t border-gray-200 dark:border-zinc-700">
            <button id="confirm-btn" onclick="confirmSubscription(event)"
                class="w-full bg-primary text-background-dark font-bold py-3 px-4 rounded-lg text-center hover:bg-yellow-500 transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98] focus-visible:focus">
                Confirm Subscription
            </button>
            <div id="progress-bar" class="progress-bar hidden">
                <div class="progress" id="progress"></div>
            </div>
        </footer>
    </div>

    <!-- Days Selection Modal -->
    <div id="days-modal" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-bold text-gray-800 dark:text-gray-200">Select Delivery Days</h3>
                <button onclick="closeDaysModal()"
                    class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">Choose which days you want your milk delivered</p>

            <div class="flex justify-between items-center mb-3">
                <h3 class="text-md font-semibold text-gray-700 dark:text-gray-300">Delivery Days</h3>
                <div class="flex gap-2">
                    <button type="button" id="select-all-days"
                        class="text-xs bg-zepto-blue text-white px-2 py-1 rounded">Select All</button>
                    <button type="button" id="clear-all-days"
                        class="text-xs bg-gray-200 text-gray-700 dark:bg-zinc-600 dark:text-gray-300 px-2 py-1 rounded">Clear
                        All</button>
                </div>
            </div>
            <div class="day-selector">
                <label class="day-option">
                    <input type="checkbox" class="sr-only day-checkbox" name="delivery_days" value="monday">
                    <div class="day-content">
                        <span class="font-medium">Mon</span>
                    </div>
                </label>
                <label class="day-option">
                    <input type="checkbox" class="sr-only day-checkbox" name="delivery_days" value="tuesday">
                    <div class="day-content">
                        <span class="font-medium">Tue</span>
                    </div>
                </label>
                <label class="day-option">
                    <input type="checkbox" class="sr-only day-checkbox" name="delivery_days" value="wednesday">
                    <div class="day-content">
                        <span class="font-medium">Wed</span>
                    </div>
                </label>
                <label class="day-option">
                    <input type="checkbox" class="sr-only day-checkbox" name="delivery_days" value="thursday">
                    <div class="day-content">
                        <span class="font-medium">Thu</span>
                    </div>
                </label>
                <label class="day-option">
                    <input type="checkbox" class="sr-only day-checkbox" name="delivery_days" value="friday">
                    <div class="day-content">
                        <span class="font-medium">Fri</span>
                    </div>
                </label>
                <label class="day-option">
                    <input type="checkbox" class="sr-only day-checkbox" name="delivery_days" value="saturday">
                    <div class="day-content">
                        <span class="font-medium">Sat</span>
                    </div>
                </label>
                <label class="day-option">
                    <input type="checkbox" class="sr-only day-checkbox" name="delivery_days" value="sunday">
                    <div class="day-content">
                        <span class="font-medium">Sun</span>
                    </div>
                </label>
            </div>
            <div id="selected-days-summary" class="mt-2 text-sm text-gray-600 dark:text-gray-400"></div>

            <div
                class="mt-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800">
                <p class="text-sm text-yellow-700 dark:text-yellow-300">Selected days will apply to all alternate
                    deliveries</p>
            </div>

            <div class="mt-6 flex gap-3">
                <button onclick="closeDaysModal()"
                    class="flex-1 bg-gray-200 text-gray-700 dark:bg-zinc-600 dark:text-gray-300 font-medium py-2 px-4 rounded-lg">
                    Cancel
                </button>
                <button id="confirm-days-btn" onclick="confirmDaysSelection()"
                    class="flex-1 bg-zepto-blue text-white font-medium py-2 px-4 rounded-lg">
                    Confirm Days
                </button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>

    <script>
        // Navigation functions
        function goBack() {
            window.history.back();
        }

        // Toggle time slot expansion
        function toggleTimeSlot(slot) {
            const content = document.getElementById(`${slot}-content`);
            const card = content.parentElement;
            const isExpanded = content.classList.contains('expanded');

            if (isExpanded) {
                content.classList.remove('expanded');
                card.classList.remove('active');
            } else {
                content.classList.add('expanded');
                card.classList.add('active');
            }
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function () {
            // Set up event listeners for quantity options
            document.querySelectorAll('.quantity-option').forEach(option => {
                option.addEventListener('click', function () {
                    const parent = this.closest('.quantity-options');
                    parent.querySelectorAll('.quantity-option').forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    updateSummary();
                });
            });

            // Set up event listeners for frequency options
            document.querySelectorAll('.frequency-option').forEach(option => {
                option.addEventListener('click', function () {
                    const parent = this.closest('.frequency-options');
                    parent.querySelectorAll('.frequency-option').forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');

                    // If alternate days is selected, show the days modal
                    if (this.getAttribute('data-value') === 'alternate') {
                        openDaysModal();
                    }

                    updateSummary();
                });
            });

            // Set up event listeners for milk type options
            document.querySelectorAll('.slot-milk-option').forEach(option => {
                option.addEventListener('click', function () {
                    const parent = this.closest('.slot-milk-options');
                    parent.querySelectorAll('.slot-milk-option').forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    updateSummary();
                });
            });

            // Set up event listeners for main milk type selection
            document.querySelectorAll('.milk-type-option').forEach(option => {
                option.addEventListener('click', function () {
                    document.querySelectorAll('.milk-type-option').forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');

                    // Update all slot milk types to match the main selection
                    const selectedMilkType = this.querySelector('input').value;
                    document.querySelectorAll('.slot-milk-option').forEach(opt => {
                        if (opt.getAttribute('data-value') === selectedMilkType) {
                            opt.click();
                        }
                    });

                    updateSummary();
                });
            });

            // Set up event listeners for time slot toggles
            document.querySelectorAll('.toggle-switch input').forEach(toggle => {
                toggle.addEventListener('change', function () {
                    const slot = this.id.replace('-toggle', '');
                    if (this.checked) {
                        document.getElementById(`${slot}-content`).classList.add('expanded');
                        document.getElementById(`${slot}-content`).parentElement.classList.add('active');
                    } else {
                        document.getElementById(`${slot}-content`).classList.remove('expanded');
                        document.getElementById(`${slot}-content`).parentElement.classList.remove('active');
                    }
                    updateSummary();
                });
            });

            // Set up event listeners for day selection
            document.querySelectorAll('.day-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', function () {
                    updateSelectedDaysSummary();
                });
            });

            // Set up select all and clear all buttons
            document.getElementById('select-all-days').addEventListener('click', function () {
                document.querySelectorAll('.day-checkbox').forEach(checkbox => {
                    checkbox.checked = true;
                });
                updateSelectedDaysSummary();
            });

            document.getElementById('clear-all-days').addEventListener('click', function () {
                document.querySelectorAll('.day-checkbox').forEach(checkbox => {
                    checkbox.checked = false;
                });
                updateSelectedDaysSummary();
            });

            // Initial summary update
            updateSummary();
        });

        // Update the subscription summary
        function updateSummary() {
            let totalMonthlyPrice = 0;
            let breakdownText = '';

            // Morning slot
            const morningToggle = document.getElementById('morning-toggle');
            if (morningToggle.checked) {
                const morningQuantity = document.querySelector('#morning-content .quantity-option.selected');
                const morningFrequency = document.querySelector('#morning-content .frequency-option.selected');
                const morningMilkType = document.querySelector('#morning-content .slot-milk-option.selected');

                if (morningQuantity && morningFrequency && morningMilkType) {
                    const quantity = parseFloat(morningQuantity.getAttribute('data-value'));
                    const milkType = morningMilkType.getAttribute('data-value');
                    const milkPrice = milkType === 'buffalo' ? 50 : 40;
                    const dailyPrice = quantity * milkPrice;

                    // Calculate monthly price based on frequency
                    let monthlyPrice = dailyPrice * 30; // Default to daily
                    let frequencyText = 'Daily';

                    if (morningFrequency.getAttribute('data-value') === 'alternate') {
                        const selectedDays = document.querySelectorAll('.day-checkbox:checked').length;
                        monthlyPrice = dailyPrice * selectedDays * 4; // Approximate 4 weeks
                        frequencyText = `${selectedDays} days/week`;
                    }

                    totalMonthlyPrice += monthlyPrice;

                    // Update morning summary
                    document.getElementById('summary-morning').classList.remove('hidden');
                    document.querySelector('#summary-morning .text-sm:first-child span:last-child').textContent =
                        `${quantity}L ${milkType.charAt(0).toUpperCase() + milkType.slice(1)} - ‚Çπ${dailyPrice}`;
                    document.getElementById('summary-morning-frequency').textContent = `Frequency: ${frequencyText}`;

                    breakdownText += `Morning: ‚Çπ${dailyPrice}/day √ó ${frequencyText === 'Daily' ? '30 days' : frequencyText} = ‚Çπ${monthlyPrice}<br>`;

                    // Update morning slot summary
                    document.querySelector('#morning-content .time-slot-summary').innerHTML =
                        `<strong>Morning Summary:</strong> ${quantity}L ${milkType.charAt(0).toUpperCase() + milkType.slice(1)} Milk delivered ${frequencyText.toLowerCase()} at 7:00-9:00 AM for ‚Çπ${dailyPrice}/day`;
                }
            } else {
                document.getElementById('summary-morning').classList.add('hidden');
            }

            // Evening slot
            const eveningToggle = document.getElementById('evening-toggle');
            if (eveningToggle.checked) {
                const eveningQuantity = document.querySelector('#evening-content .quantity-option.selected');
                const eveningFrequency = document.querySelector('#evening-content .frequency-option.selected');
                const eveningMilkType = document.querySelector('#evening-content .slot-milk-option.selected');

                if (eveningQuantity && eveningFrequency && eveningMilkType) {
                    const quantity = parseFloat(eveningQuantity.getAttribute('data-value'));
                    const milkType = eveningMilkType.getAttribute('data-value');
                    const milkPrice = milkType === 'buffalo' ? 50 : 40;
                    const dailyPrice = quantity * milkPrice;

                    // Calculate monthly price based on frequency
                    let monthlyPrice = dailyPrice * 30; // Default to daily
                    let frequencyText = 'Daily';

                    if (eveningFrequency.getAttribute('data-value') === 'alternate') {
                        const selectedDays = document.querySelectorAll('.day-checkbox:checked').length;
                        monthlyPrice = dailyPrice * selectedDays * 4; // Approximate 4 weeks
                        frequencyText = `${selectedDays} days/week`;
                    }

                    totalMonthlyPrice += monthlyPrice;

                    // Update evening summary
                    document.getElementById('summary-evening').classList.remove('hidden');
                    document.querySelector('#summary-evening .text-sm:first-child span:last-child').textContent =
                        `${quantity}L ${milkType.charAt(0).toUpperCase() + milkType.slice(1)} - ‚Çπ${dailyPrice}`;
                    document.getElementById('summary-evening-frequency').textContent = `Frequency: ${frequencyText}`;

                    breakdownText += `Evening: ‚Çπ${dailyPrice}/day √ó ${frequencyText === 'Daily' ? '30 days' : frequencyText} = ‚Çπ${monthlyPrice}<br>`;

                    // Update evening slot summary
                    document.querySelector('#evening-content .time-slot-summary').innerHTML =
                        `<strong>Evening Summary:</strong> ${quantity}L ${milkType.charAt(0).toUpperCase() + milkType.slice(1)} Milk delivered ${frequencyText.toLowerCase()} at 6:00-8:00 PM for ‚Çπ${dailyPrice}/day`;
                }
            } else {
                document.getElementById('summary-evening').classList.add('hidden');
            }

            // Update total monthly price
            document.getElementById('monthly-price').textContent = `‚Çπ${totalMonthlyPrice}/month`;
            document.getElementById('price-breakdown').innerHTML = breakdownText + `Total: ‚Çπ${totalMonthlyPrice}/month`;
        }

        // Days selection modal functions
        function openDaysModal() {
            document.getElementById('days-modal').style.display = 'flex';
            updateSelectedDaysSummary();
        }

        function closeDaysModal() {
            document.getElementById('days-modal').style.display = 'none';
        }

        function confirmDaysSelection() {
            closeDaysModal();
            updateSummary();
        }

        function updateSelectedDaysSummary() {
            const selectedDays = document.querySelectorAll('.day-checkbox:checked');
            const daysArray = Array.from(selectedDays).map(day => {
                const dayValue = day.value;
                return dayValue.charAt(0).toUpperCase() + dayValue.slice(1);
            });

            let summaryText = '';
            if (daysArray.length === 0) {
                summaryText = 'No days selected';
                document.getElementById('confirm-days-btn').disabled = true;
                document.getElementById('confirm-days-btn').classList.add('opacity-50', 'cursor-not-allowed');
            } else {
                summaryText = `Selected: ${daysArray.join(', ')}`;
                document.getElementById('confirm-days-btn').disabled = false;
                document.getElementById('confirm-days-btn').classList.remove('opacity-50', 'cursor-not-allowed');
            }

            document.getElementById('selected-days-summary').innerHTML = summaryText;
        }

        // Confirm subscription
        function confirmSubscription(event) {
            event.preventDefault();

            const button = document.getElementById('confirm-btn');
            const progressBar = document.getElementById('progress-bar');
            const progress = document.getElementById('progress');

            // Show progress bar
            button.disabled = true;
            button.textContent = 'Processing...';
            progressBar.classList.remove('hidden');

            // Simulate processing
            let width = 0;
            const interval = setInterval(() => {
                if (width >= 100) {
                    clearInterval(interval);

                    // Show success toast
                    showToast('Subscription confirmed successfully!');

                    // Reset button after a delay
                    setTimeout(() => {
                        button.disabled = false;
                        button.textContent = 'Confirm Subscription';
                        progressBar.classList.add('hidden');
                        progress.style.width = '0%';
                    }, 2000);
                } else {
                    width += 5;
                    progress.style.width = width + '%';
                }
            }, 50);
        }

        // Toast notification
        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');

            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }
    </script>
</body>

</html>